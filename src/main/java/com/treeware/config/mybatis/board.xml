<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.treeware.board.dao.BoardDao">

	<insert id="write" parameterType="BoardDto">
		INSERT INTO BRD(BRD_SQ, BCODE, BRD_TTL, EMP_SQ, BRD_CTT, BRD_DT, BRD_HITS, BRD_FL_ONM, BRD_FL_MNM, BRD_FL_RT)
		VALUES (#{brd_sq}, #{bcode}, #{brd_ttl}, #{emp_sq}, #{brd_ctt}, #{brd_dt}, #{brd_hits}, #{brd_fl_onm, jdbcType=VARCHAR}, #{brd_fl_mnm, jdbcType=VARCHAR}, #{brd_fl_rt, jdbcType=VARCHAR})
	</insert>

	
	<select id="getBoardList" resultType="BoardListDto">
	SELECT BCODE, BNAME, BTYPE, CCODE
	FROM BRD_LIST
	</select>
	
	<select id="getBoardInfo" parameterType="String" resultType="BoardDto">
	SELECT BRD_SQ, BCODE, BRD_TTL, EMP_SQ, BRD_CTT, BRD_DT, BRD_HITS, BRD_FL_ONM, BRD_FL_MNM, BRD_FL_RT
	FROM BRD
	WHERE BCODE = #{bcode}
	ORDER BY brd_sq DESC
	</select>
	
	<insert id="boardWrite" parameterType="BoardDto">
	INSERT INTO BRD (BRD_SQ, BCODE, BRD_TTL, EMP_SQ, BRD_CTT, BRD_DT, BRD_HITS, BRD_FL_ONM, BRD_FL_MNM, BRD_FL_RT)
	VALUES (BRD_SQ.NEXTVAL, #{bcode}, #{brd_ttl}, #{emp_sq}, #{brd_ctt}, #{brd_dt}, #{brd_hits}, #{brd_fl_onm}, #{brd_fl_mnm}, #{brd_fl_rt})
	</insert>

	<select id="getNextSeq" resultType="int">
	SELECT BRD_SQ.NEXTVAL
	FROM DUAL
	</select>

	<select id="boardView" parameterType="BoardDto" resultType="BoardDto">
	SELECT BRD_SQ, BCODE, BRD_TTL, EMP_SQ, BRD_CTT, BRD_DT, BRD_HITS, BRD_FL_ONM, BRD_FL_MNM, BRD_FL_RT
	FROM BRD
	WHERE BRD_SQ = #{brd_sq}
	</select>
	
	<select id="boardSearch" parameterType="map" resultType="BoardDto">
	SELECT BRD_SQ, BCODE, BRD_TTL, EMP_SQ, BRD_CTT, BRD_DT, BRD_HITS, BRD_FL_ONM, BRD_FL_MNM, BRD_FL_RT
	FROM BRD
	WHERE BCODE = #{bcode}
	<if test="word != null and word != ''">
	AND ${key} like '%'||#{word}||'%'
	</if>
	</select>
	
</mapper>
