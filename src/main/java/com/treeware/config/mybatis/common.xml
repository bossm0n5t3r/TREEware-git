<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.treeware.common.dao.CommonDao">

	<select id="getNextBrdSeq" resultType="int">
		SELECT BRD_SQ.NEXTVAL
		FROM DUAL
	</select>

	<select id="getNextSeq" resultType="int">
	select ML_SQ.nextval
	from dual
	</select>

	<select id="getNewArticleCount" parameterType="map" resultType="int">
	select count(ML_SQ)
	from ML
	where ML_GRP_SQ = #{ml_grp_sq}
	and to_char(ML_SEND_DATE,'yymmdd') = to_char(sysdate,'yymmdd')
	</select>
	
	<select id="getTotalArticleCount" parameterType="map" resultType="int">
	select count(ML_SQ)
	from ML
	where ML_GRP_SQ = #{ml_grp_sq}
		<if test="word != null and word != ''">
				<choose>
					<when test="key == 'ml_ttl'">
					and ML_TTL like '%'||#{word}||'%'
					</when>
					<when test="key == 'ml_rcv_add'">
					and ML_RCV_ADD like '%'||#{word}||'%'
					</when>
				</choose>
			</if>
	</select>

</mapper>